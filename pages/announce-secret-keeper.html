<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Announcement: Secret Keeper</title>
    <style>
        /* --- CSS Variables (Original Dark Neon Theme) --- */
        :root {
            /* Restored original colors */
            --bg-primary: #0a0a0a;
            --bg-content: rgba(0, 0, 0, 0.95);
            --accent-neon: #00ffc8;
            --text-primary: #f0f0f0;
            --text-secondary: #00885f;
            --glow-shadow: 0 0 10px rgba(0, 255, 200, 0.7);
            --box-shadow-card: 0 0 15px rgba(0, 255, 200, 0.2);
            --font-primary: 'Consolas', 'Courier New', monospace;
            --font-secondary: 'Arial', sans-serif;
            --border-radius-card: 8px;
        }

        /* ---------------------------------------------------------------------- */
        /* --- BASE STYLES (Applies to all screens, focused on desktop/tablet) --- */
        /* ---------------------------------------------------------------------- */
        body {
            font-family: var(--font-secondary);
            margin: 0;
            padding: 0;
            background-color: transparent;
            line-height: 1.6;
            text-align: center; /* Default center alignment for larger screens */
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background-color: rgba(0, 0, 0, 0.85); 
            display: flex;
            justify-content: center;
            align-items: center; 
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            pointer-events: none; /* Allows clicks to pass through when hidden */
        }

        .modal-overlay.visible {
            visibility: visible;
            opacity: 1;
            pointer-events: auto; /* Re-enable clicks when visible */
        }
        
        .announcement-card {
            max-width: 600px; /* Wider for desktop */
            width: 90%; /* Responsive fallback */
            margin: 0; 
            padding: 25px 30px;
            border: 2px solid var(--accent-neon);
            border-radius: var(--border-radius-card);
            box-shadow: var(--box-shadow-card);
            background-color: var(--bg-content);
            color: var(--text-primary);
            text-align: center; /* Default center alignment for larger screens */
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        
        .header-title {
            font-family: var(--font-primary);
            font-size: 1.6em;
            color: var(--accent-neon);
            text-shadow: 0 0 5px var(--accent-neon);
            margin-bottom: 0.25em;
            word-break: break-word; /* Ensure long titles break correctly */
        }

        .header-subtitle {
            font-size: 1.0em;
            margin-top: 0;
            color: var(--text-secondary);
            margin-bottom: 20px;
            word-break: break-word; /* Ensure long subtitles break correctly */
        }

        .feature-list {
            list-style: none;
            padding: 0;
            text-align: left; /* Always left-aligned, even on desktop */
            margin: 20px 0;
            border-top: 1px solid var(--text-secondary);
            padding-top: 15px;
        }

        .feature-list li {
            margin-bottom: 12px;
            font-size: 0.9em;
            font-family: var(--font-primary);
            color: var(--text-primary);
            word-break: break-word; /* Crucial for long feature descriptions */
        }

        .feature-list li b {
            color: var(--accent-neon);
            text-shadow: 0 0 2px rgba(0, 255, 200, 0.5);
        }

        .cta-button {
            display: inline-block;
            background-color: var(--accent-neon);
            color: var(--bg-primary); 
            padding: 10px 20px;
            margin-top: 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.0em;
            transition: all 0.3s ease;
            box-shadow: var(--glow-shadow);
            word-break: break-word; /* For CTA button text */
        }

        .cta-button:hover {
            background-color: #ffffff;
            box-shadow: 0 0 15px var(--accent-neon);
            color: #000000;
        }

        .close-btn {
            background: none;
            border: 1px solid var(--text-secondary);
            color: var(--text-secondary);
            padding: 5px 10px;
            margin-top: 15px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 0.8em;
            transition: all 0.2s ease;
            font-family: var(--font-primary);
        }

        .close-btn:disabled {
            cursor: not-allowed;
            opacity: 0.4;
            border-color: #555;
            color: #555;
        }

        .close-btn:hover:not(:disabled) {
            border-color: var(--accent-neon);
            color: var(--accent-neon);
        }

        .timer-text {
            font-size: 0.75em;
            color: var(--text-secondary);
            margin-top: 10px;
            font-family: var(--font-primary);
            word-break: break-word; /* For timer text */
        }

        .footer-note {
            font-size: 0.75em;
            color: var(--text-secondary);
            margin-top: 20px;
            font-family: var(--font-primary);
            word-break: break-word; /* For footer note */
        }

        /* ---------------------------------------------------------------------- */
        /* --- MEDIA QUERY (MOBILE SPECIFIC STYLES) --- */
        /* ---------------------------------------------------------------------- */
        @media (max-width: 650px) {
            
            .modal-overlay {
                background-color: rgba(0, 0, 0, 0.95); 
            }
            
            .announcement-card {
                width: 90%;
                max-width: 90%; 
                padding: 15px;
                margin: 0 5%;
                text-align: left; /* Mobile: Align card content to the left */
            }

            .header-title {
                font-size: 1.3em;
                text-align: left; /* Mobile: Align title to the left */
            }

            .header-subtitle {
                font-size: 0.9em;
                text-align: left; /* Mobile: Align subtitle to the left */
            }

            .feature-list li {
                font-size: 0.8em;
                text-align: left; /* Mobile: Ensure list items are left-aligned */
            }
            
            .cta-button {
                display: block; /* Make button full-width */
                width: 100%; /* Take full width of its container (card padding applied) */
                margin-left: 0; /* Remove auto margins to align left */
                margin-right: 0;
                font-size: 0.9em;
                text-align: center; /* Keep CTA button text centered within button */
            }

            .close-btn {
                font-size: 0.7em;
                display: block; /* Make button full-width */
                width: 100%; /* Take full width of its container */
                margin-left: 0; /* Remove auto margins to align left */
                margin-right: 0;
                text-align: center;
            }

            .timer-text, .footer-note {
                text-align: left; /* Mobile: Align these texts to the left */
            }

        .cta-button {
            display: inline-block;
            background-color: var(--accent-neon);
            color: var(--bg-primary); 
            padding: 10px 0px;
            margin-top: 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.0em;
            transition: all 0.3s ease;
            box-shadow: var(--glow-shadow);
            word-break: break-word; /* For CTA button text */
        }

        }
    </style>
</head>
<body>

    <div id="keeperModal" class="modal-overlay">
        <div class="announcement-card">
            
            <h1 class="header-title">// NEW ASSET DEPLOYED: Secret Keeper</h1>
            <p class="header-subtitle">SYSTEM STATUS: SECURE. <br> Access your fully local, AES-256 encrypted vault.</p>
            
            <ul class="feature-list">
                <li>&#x1F512; <b>CLIENT-SIDE ENCRYPTION:</b> All data secured with <b>AES-256</b>. Keys remain local.</li>
                <li>&#x1F4BE; <b>ZERO BACKEND:</b> Storage is <b>100% localStorage</b>. No servers, no tracking.</li>
                <li>&#x1F511; <b>MASTER KEY PROTECTION:</b> Absolute control. No key recovery <b>by design</b>.</li>
                <li>&#x1F504; <b>DATA MANAGEMENT:</b> Organized Credential, Note, and Link storage. Import/Export available.</li>
            </ul>

            <a href="https://keeper.mahdiyasser.site" target="_top" class="cta-button">
                ACCESS VAULT &gt;
            </a>

            <div class="timer-text" id="timerMessage">
                [ WINDOW LOCK ACTIVE: <span id="timer">10</span> seconds ]
            </div>

            <button class="close-btn" id="closeButton" onclick="closeModal()" disabled>
                [ CLOSE WINDOW ]
            </button>

            <p class="footer-note">
                Origin: Mahdi Yasser | Location: https://keeper.mahdiyasser.site
            </p>
        </div>
    </div>
    <script>
        
        // --- COOKIE FUNCTIONS ---
        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function setCookie(name, value, seconds) {
            let expires = "";
            if (seconds) {
                const date = new Date();
                date.setTime(date.getTime() + (seconds * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "")  + expires + "; path=/";
        }

        // --- MODAL LOGIC ---
        
        const modal = document.getElementById('keeperModal');
        const closeBtn = document.getElementById('closeButton');
        const timerElement = document.getElementById('timer');
        const timerMessage = document.getElementById('timerMessage');
        const cookieName = 'seenKeeperAnnouncement';
        
        let countdownTime = 10;
        let timerInterval;
        
        // Cookie expiration is 5 minutes (300 seconds)
        const EXPIRATION_SECONDS = 300; 

        /** Hides the modal, sets the cookie, AND notifies the parent page to hide the iframe. */
        function closeModal() {
            modal.classList.remove('visible');
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            // 1. Set the cookie to expire in 5 minutes (300 seconds)
            setCookie(cookieName, 'true', EXPIRATION_SECONDS); 

            // 2. Notify the parent window to hide the entire iframe
            window.parent.postMessage('closeKeeperModal', '*'); 
        }

        /** Handles the countdown display and enables the close button. */
        function startCountdown() {
            timerInterval = setInterval(() => {
                countdownTime--;
                timerElement.textContent = countdownTime;
                
                if (countdownTime <= 0) {
                    clearInterval(timerInterval);
                    closeBtn.disabled = false;
                    timerMessage.innerHTML = '<b>[ WINDOW LOCK RELEASED]</b>';
                }
            }, 1000);
        }

        // --- INITIALIZATION ---
        
        if (!getCookie(cookieName)) {
            modal.classList.add('visible');
            startCountdown();
        } else {
             // If the cookie exists, ensure the modal overlay is permanently invisible
             modal.style.display = 'none';
        }

    </script>
</body>
</html>
